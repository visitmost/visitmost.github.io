var edik;
edik_init=function(g,h,d,f){var e=(new Date).valueOf(),a=jQuery;a.when(a("<link/>",{rel:"stylesheet",type:"text/css",href:d+"css/edik.css?"+e}).appendTo("head"),a.getScript(d+"lib/camanjs/dist/caman.full.js"),a.getScript(d+"js/edik_core.js?"+e),a.getScript(d+"js/jquery.nouislider.min.js"),a.get(d+"main_form.html?"+e,function(d){a(h).html(d)}),a.Deferred(function(d){a(d.resolve)})).done(function(){edik=new edik_core;"undefined"!=typeof f&&a.each(f,function(a,c){edik.setCallback(a,c)});a=jQuery;Caman.remoteProxy=
Caman.IO.useProxy("php");Caman.remoteProxy=d+"lib/camanjs/proxies/caman_proxy.php";edik.setCallback("afterRender",function(){});edik.setCallback("beforeImageLoad",function(){a("#edik-overlay").show()});edik.setCallback("afterImageLoad",function(){a("#edik-overlay").fadeOut()});edik.init("#edik-canvas",g);var e=edik.getTools();a.each(e,function(b,c){"filter"===c.type&&a("#"+b+"_slider").noUiSlider({range:[c.from,c.to],handles:1,step:1,start:0,slide:function(){edik.setFilter(b,parseInt(a(this).val()))}})});
a("#edik-container").on("click","#edik-reset",function(){confirm("Do you really want reset all changes?")&&edik.resetFilters()});a("#edik-container").on("click",".edik-tool",function(){var b=a(this).data("tool"),c=1===a(this).data("value")?0:1;a(this).data("value",c);edik.setFilter(b,c)});a("#edik-container").on("click",".edik-tool.greyscale, .edik-tool.invert",function(){a(this).toggleClass("switched")});a("#edik-container").on("click",".edik-rotate",function(){var b=edik.getToolValue("rotate"),
b=b+(a(this).hasClass("right")?90:-90);270<b?b=0:0>b&&(b=270);edik.setFilter("rotate",b)});a("#edik-container").on("click",".edik-filter-pm",function(){var b=a(this).data("tool"),c=parseInt(a("#"+b+"_slider").val()),d=a(this).data("direction"),e=edik.getTools(),c=c+5*("minus"===d?-1:1),c=c>e[b].to?e[b].to:c,c=c<e[b].from?e[b].from:c;a("#"+b+"_slider").val(c);edik.setFilter(b,c);return!1});a("#edik-container").on("click","#edik-save",function(){edik.save();return!1});a("#edik-container").on("mouseover",
".edik-filter-edit",function(){a(this).parent().find(".edik-slider-noui").slideDown("fast")});a("#edik-container").on("mouseleave",".edik-filter",function(){a(this).find(".edik-slider-noui").slideUp("fast")})})};
